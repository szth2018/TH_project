# Vue 项目

## 个人练习项目,仅供参考


## 首页的九宫格布局可以使用mui中的grid-default.html实现
    1.使用mui中的grid-default.html
    2.添加图标并设置宽高
    3.讲背景色设置为白色
    4.去掉九宫格的边框
    5.修改字体大小


## 实现路由切换的动画效果
1.如何实现路由切换的动画效果
+ 要使用Vue提供的transition元素把<router-view></router-view>包裹起来
+ 使用自定义的动画类名实现动画效果

2.当实现基本的动画效果之后,要解决一些问题:
+ 设置即将离开页面的运动方向为'-100%'
+ 为了放置页面跳动的问题,需要为离开的页面设置绝对定位;
+ 当有组件切换动画效果的一瞬间,页面的宽度会变成正宽度的两倍,此时需要隐藏超出屏幕宽度的区域


## 完成新闻资讯列表的路由配置
+ 创建路由组件页面
+ 改造路由链接
+ 添加路由对应规则


## 绘制新闻资讯页面的效果
+ 使用mui中的media-list.html
+ 使用'display：flex'实现了弹性盒模型布局,从而让元素左右贴边:'justify-content':space-between


## 展示新闻列表的数据
1.当页面加载完毕之后,就要去获取页面数据,因此,应该在created钩子函数中调用获取数据的方法
2.在methods中,定义一个“getNewsList”方法来获取数据"this.$http.get()"
3.在获取数据的时候,为了操作方便,用到"async"和"await"特性
4.当数据获取回来之后,如果想要通过"v-for"指令循环渲染到页面上,要把数据挂载到"data"上


## 定义全局的过滤器来格式化时间字符串
1.整个项目中多处组件都需要格式化时间,因此,把时间过滤器定义为全局比较好
2.定义全局过滤器的语法:"Vue.filter('过滤器名称',function(datastr){})"
3.调用过滤器的语法:'<span>{{item.add_time|过滤器名称}}</span>'
4.时间过滤器如何去格式化时间？便捷的方式是借助第三方的'moment'插件来快速格式化时间
5.全局过滤器应该定义到哪个文件中 ？
6.当在设计时间过滤器的时候,有的用户可能会想要最全的“年-月-日-时:分:秒”,有的用户可能会想要“YYYY-MM-DD”,此时,可以为过滤器提供一个可选的格式字符串


## 以模块化的思想抽离main.js中的代码
1.先把"filter"过滤器统一抽离到"filter.js"模块中
2.当抽离完"filter.js"后,在"main.js"中,有多行代码和"vm"实例没有很强的关联关系,因此,应当把这些全局配置相关代码,单独抽离到"globalConfig.js"的模块中,
3.这样,在"main.js"中不需要关心全局配置文件中如何配置的,只需要导入这个全局配置即可


## 实现新闻列表和新闻详情之间的跳转
1. 添加新闻详情组件
2. 改造每一个新闻列表项的链接, 为"router-link",其中, "to"属性中的id值,需要动态拼接每一个router-link,因此,需要把"to"属性,改造成":to",然后,属性值中的统一路径前缀:
"/home/newsinfo/"应当被单引号包裹起来,后面,再拼接上"item.id"即可
3. 添加路由规则
4. 当实现了以上三步之后,想在页面中,获取路由传递过来的参数:
    + 方式1:"$route.params.id"来获取,
    + 方式2:使用路由的'props'属性来传递参数:
        - 改造路由规则, 在对应的规则中,添加'props:true'的属性
        - 在组件中,定义'props:[]',数组中定义的名称,就是路由规则中,对应参数的名称占位符(要保持一致)


## 渲染新闻详情页面
1. 获取数据
2. 挂载数据到data上
3. 渲染新闻详情页面


## 评论子组件的封装和引用
1. 在项目中创建 'src->sub-components'目录
2. 创建一个标准的vue组件,命名为 'comment.Vue',作为评论子组件
3. 哪个页面需要引用这个评论组件,就在页面的script节点中,通过import的形式,导入此组件
4. 在页面的script中, 通过 'components'属性注册导入评论组件
5. 把注册的名称,以标签的形式,引入到页面上,就能够看到评论子组件


## 绘制评论子组件的结构


## 获取评论内容
1. 前提:在评论组件中,需要获取到新闻的id
2. 通过属性传递的形式,父组件为子组件传递新闻的id值 //在父组件中的props节点注册一个属性叫id,然后在父组件页面上挂载的子组件中绑定创建一个属于子组件的属性,并且在子组件的props节点注册一个属性值,注意:此时的属性值必须要与在父组件页面上挂载子组件的属性值一样。才能完成父子组件之间的传值
3. 定义根据新闻id和页码,获取评论数据的方法,并在 'created'钩子中,调用此方法,获取数据
4. 把获取到的数据,挂载到data上的cmtlist中,并渲染页面


## 点击加载更多的评论
1. 为加载更多按钮,绑定点击事件
2. 在事件中,让page页码值自增 + 1
3. 当页码值 + 1 之后,要重新调用获取评论内容的方法
    + 如果重新调用获取更多评论内容的方法,刚获取到的那一页会把之前的评论数据覆盖掉
    + 为了防止上面问题的出现,我们在获取到评论数据之后,不应该直接 
        'this.cmlist = data.message', 
        而是应该'this.cmlist = this.cmlist.concat(data.message)'


## 实现发表评论的功能
1. 在点击发表评论的时候,在处理函数中,做一下非法值校验,防止评论内容为空
2. 校验通过之后,调用API接口提交评论数据到后端,
3. 当评论成功后,需要在客户端,手动组织出一个新的评论对象,手动unshift到评论列表 'cmtlist中'


## 改造图片分享的路由跳转
1. 新建一个组件页面
2. 改造路由链接 'HomeContainer.vue'
3. 添加一个路由规则 'router.js'


## 实现图片分享列表中顶部的滑动区域
1. 借助于MUI的 'tab-top-webview-main'控件来使用
2. 拿到UI界面代码片段之后,需要把 '.mui-fullscreen'去掉,否则上导航栏会显示在最上面
3. 当页面布局完成后,发现无法实现滑动效果,此时应当使用官方推荐的形式,去初始化控件,初始化方式参考官方文档
4. 当引入完'tab-top-webview-main'控件控件后,要import完mui的.min.js文件,mui.js文件不包含mui()方法,使用mui.js文件会导致没有滑动效果


## 当在项目中引入了MUI的JS文件报错的问题:
1. 出现问题的原因:
    + webpack 打包出来的bundle.js中,默认启用了严格模式
    + 在项目中,import 导入的mui.js中,使用了callee caller这些特性,这些特性在严格模式中不支持,会报错
    + 解决方案:关闭webpack的严格模式,更容易些,因为不需要修改mui.js的源代码了
        > 关闭webpack严格模式的教程:使用一个webpack的插件,
            插件地址:'https://github.com/genify/babel-plugin-transform-remove-strict-mode'


## 当移除严格模式之后滑动效果还无法实现
1. 主要原因:需要在 'mounted'钩子函数中来初始化
2. 因为,如果当前的图片分享列表组件,还没有挂载到页面上,那么调用mui()方法初始化组件是没有任何效果的,因为此时页面上还没有任何元素


## 如何移除浏览器报的警告Intervention
1. 为.mui-slider类样式,添加 'touch-action: pan-x'属性样式,从而支持此元素的单指水平滑动的效果,提高滑动的流畅度;


## 解决tabbar区域和图片分类列表JS行为冲突的问题
1.  冲突原因: 每一个tabbar按钮的类样式 `mui--tab-item` 和JS行为有冲突
2.  解决的思路: 把所有和 `mui--tab-item` 相关的样式粘出来,然后改个类名,重新把自己的类名,替换掉之前的即可


##  获取图片分类数据并加载到页面上
1. 获取分类数据
2. 手动把 `全部`分类信息,通过数组的unshift方法,头部追加到数据中
3. 把获取到的分类,挂载到data上的category[]中
4. 再通过v-for循环渲染到懒加载组件里面
5. 默认设置 `全部分类`被高亮选中： 通过`:class` 结合三元表达式,把`id`为0那一项分类,设置为默认选中


##  默认加载全部的分类数据
1. 定义一个`getPhotosCategory`的方法,接收一个分类id,然后根据id获取所有的图片列表
2. 把获取到的图片,挂载到`imagesList[]`中
3. 根据Mint-UI的lazy-load组件,实现图片的懒加载效果;
    + 在实现懒加载效果时候,需要注意: 图片的url地址, 需要通过`v-lazy`来指定；
    + 需要把图片的样式也粘贴到项目中,同时, 把`image`选择器修改成`img`标签选择器


##  美化图片列表


##  点击图片分类,切换图片列表数据
1.  为每一个分类,添加点击事件,重新发起数据请求,来获取图片列表